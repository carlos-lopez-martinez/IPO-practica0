<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ titulo }}</title>
    <meta name="description" content="{{ descripcion }}">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        .registration-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 0;
        }
        
        .registration-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin: 2rem auto;
            max-width: 1200px;
        }
        
        .form-section {
            padding: 2rem;
            border-bottom: 1px solid #e9ecef;
        }
        
        .form-section:last-child {
            border-bottom: none;
        }
        
        .form-progress {
            background: #f8f9fa;
            padding: 1rem 2rem;
        }
        
        .progress-bar-custom {
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #0056b3);
            transition: width 0.3s ease;
        }
        
        /* PROBLEMAS INTENCIONADOS */
        .required-field::after {
            content: " *";
            color: red;
        }
        
        .field-help {
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 0.25rem;
        }
        
        .radio-group {
            display: flex;
            gap: 1rem;
            margin-top: 0.5rem;
        }
        
        .checkbox-group {
            margin-top: 0.5rem;
        }
        
        .file-upload-area {
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .file-upload-area:hover {
            border-color: #007bff;
            background: #e7f3ff;
        }
        
        .range-display {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 0.25rem;
        }
        
        .character-counter {
            text-align: right;
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 0.25rem;
        }
        
        /* Problemas de contraste intencionados */
        .subtle-text {
            color: #ccc;
        }
        
        .validation-message {
            margin-top: 0.25rem;
            font-size: 0.8rem;
        }
        
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .warning { color: #ffc107; }
    </style>
</head>

<body>
    <!-- PROBLEMA: Falta skip link -->
    
    <div class="registration-container">
        <div class="container">
            
            <!-- Navegaci√≥n de regreso -->
            <div class="mb-3">
                <a href="{{ url_for('index') }}" class="btn btn-outline-light">
                    ‚Üê Volver al portal
                </a>
            </div>
            
            <div class="registration-card">
                
                <!-- PROBLEMA: Progreso sin accesibilidad -->
                <header class="form-progress">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h1 style="font-weight: 500; font-size: 1.2rem;">Registro de Usuario</h1>
                        <div style="font-size: 0.9rem; color: #6c757d;">Paso 1 de 1</div>
                    </div>
                    <div class="progress-bar-custom">
                        <div class="progress-fill" style="width: 25%"></div>
                    </div>
                    <div style="margin-top: 0.5rem; font-size: 0.8rem; color: #6c757d;">
                        Completando informaci√≥n personal...
                    </div>
                </header>
                
                <main>
                    <!-- PROBLEMA: Formulario sin estructura sem√°ntica apropiada -->
                    <form id="registrationForm" novalidate style="padding: 0;">
                        
                        <!-- Secci√≥n 1: Informaci√≥n Personal - M√öLTIPLES PROBLEMAS -->
                        <fieldset class="form-section">
                            <!-- PROBLEMA: Sin fieldset para agrupar -->
                            <legend style="font-size: 1.3rem; font-weight: 500; margin-bottom: 1.5rem; color: #007bff;">
                                üìù Informaci√≥n Personal
                            </legend>
                            
                            <div class="row">
                                <!-- Nombre completo -->
                                <div class="col-md-6 mb-3">
                                    <!-- PROBLEMA: Label sin asociaci√≥n correcta -->
                                    <label for="text" id="label-fullName" class="form-label required-field">Nombre completo</label>
                                    <input type="text" 
                                        id="text"
                                        class="form-control" 
                                        name="fullName"
                                        placeholder="Ingresa tu nombre completo"
                                        maxlength="100"
                                        aria-labelledby="label-fullName"
                                        aria-describedby="fullName-help">
                                    <div class="character-counter">0/100 caracteres</div>
                                    <!-- PROBLEMA: Mensaje de ayuda no asociado -->
                                    <div id="fullName-help" class="field-help">
                                        Incluye tu nombre y apellidos completos
                                    </div>
                                </div>
                                
                                <!-- Email -->
                                <div class="col-md-6 mb-3">
                                    <label id="label-email" for="email-form" class="form-label required-field">Correo electr√≥nico</label>
                                    <input type="email" 
                                        id="email-form"
                                        class="form-control" 
                                        name="email"
                                        placeholder="tu@email.com"
                                        autocomplete="email"
                                        aria-labelledby="label-email">
                                    <!-- PROBLEMA: Validaci√≥n en vivo sin accesibilidad -->
                                    <div class="validation-message" style="display: none;"></div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <!-- Fecha de nacimiento -->
                                <div class="col-md-4 mb-3">
                                    <label id="label-fechanacimiento" for="form-fechanacimiento" class="form-label required-field">Fecha de nacimiento</label>
                                    <input type="date" 
                                        id="form-fechanacimiento"
                                        class="form-control" 
                                        name="birthDate"
                                        max="2006-01-01"
                                        aria-labelledby="label-fechanacimiento"
                                        aria-describedby="fechanacimiento-help">
                                    <div id="fechanacimiento-help" class="field-help">
                                        Debes ser mayor de 18 a√±os para registrarte
                                    </div>
                                </div>
                                
                                <!-- Tel√©fono -->
                                <div class="col-md-4 mb-3">
                                    <label id="label-tlf" for="form-tlf" class="form-label required-field">Tel√©fono</label>
                                    <input type="tel" 
                                        id="form-tlf"
                                        class="form-control" 
                                        name="phone"
                                        placeholder="+34 600 000 000"
                                        autocomplete="tel"
                                        aria-labelledby="label-tlf">
                                    <div class="validation-message" style="display: none;"></div>
                                </div>
                                
                                <!-- Pa√≠s -->
                                <div class="col-md-4 mb-3">
                                    <!-- PROBLEMA: Select sin label apropiado -->
                                    <label for="pais" id="label-select" class="form-label required-field">Pa√≠s</label>
                                    <select id="pais" class="form-select" name="country" aria-labelledby="label-select">
                                        <!-- PROBLEMA: Opci√≥n por defecto no accesible -->
                                        <option value="">Selecciona tu pa√≠s</option>
                                        <option value="ES">Espa√±a</option>
                                        <option value="MX">M√©xico</option>
                                        <option value="AR">Argentina</option>
                                        <option value="CO">Colombia</option>
                                        <option value="PE">Per√∫</option>
                                        <option value="CL">Chile</option>
                                        <option value="OTHER">Otro</option>
                                    </select>
                                </div>
                            </div>
                        </fieldset>
                        
                        <!-- Secci√≥n 2: Informaci√≥n Profesional - PROBLEMAS -->
                        <div class="form-section">
                            <div style="font-size: 1.3rem; font-weight: 500; margin-bottom: 1.5rem; color: #007bff;">
                                üíº Informaci√≥n Profesional
                            </div>
                            
                            <div class="row">
                                <!-- Ocupaci√≥n -->
                                <div class="col-md-6 mb-3">
                                    <label id="label-ocupacion" for="form-ocupacion" class="form-label">Ocupaci√≥n actual</label>
                                    <input type="text"
                                        id="form-ocupacion" 
                                        class="form-control" 
                                        name="occupation"
                                        placeholder="Ej: Desarrollador Frontend"
                                        list="occupationsList"
                                        aria-labelledby="label-ocupacion">
                                    
                                    <!-- PROBLEMA: Datalist sin accesibilidad -->
                                    <datalist id="occupationsList">
                                        <option value="Desarrollador Frontend">
                                        <option value="Desarrollador Backend">
                                        <option value="Full Stack Developer">
                                        <option value="DevOps Engineer">
                                        <option value="UX/UI Designer">
                                        <option value="Product Manager">
                                        <option value="Data Scientist">
                                        <option value="Estudiante">
                                    </datalist>
                                </div>
                                
                                <!-- Experiencia -->
                                <div class="col-md-6 mb-3">
                                    <div class="form-label">A√±os de experiencia</div>
                                    <!-- PROBLEMA: Range input sin descripci√≥n accesible -->
                                    <input type="range" 
                                        class="form-range" 
                                        name="experience"
                                        min="0" 
                                        max="20" 
                                        value="2"
                                        step="1">
                                    <div class="range-display">
                                        <span>0 a√±os</span>
                                        <span id="experienceValue">2 a√±os</span>
                                        <span>20+ a√±os</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Habilidades t√©cnicas - PROBLEMA: Checkboxes sin estructura -->
                            <fieldset class="mb-3">
                                <legend class="form-label">Habilidades t√©cnicas<legend>
                                <div class="field-help">Selecciona todas las que apliquen</div>
                                
                                <div class="checkbox-group">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <input type="checkbox" name="skills" value="html" aria-label="Seleccionar habilidad HTML y CSS" style="margin-right: 0.5rem;">
                                            HTML/CSS
                                        </div>
                                        <div class="col-md-3">
                                            <input type="checkbox" name="skills" value="javascript" aria-label="Seleccionar habilidad JavaScript" style="margin-right: 0.5rem;">
                                            JavaScript
                                        </div>
                                        <div class="col-md-3">
                                            <input type="checkbox" name="skills" value="react" aria-label="Seleccionar habilidad React" style="margin-right: 0.5rem;">
                                            React
                                        </div>
                                        <div class="col-md-3">
                                            <input type="checkbox" name="skills" value="vue" aria-label="Seleccionar habilidad Vue.js" style="margin-right: 0.5rem;">
                                            Vue.js
                                        </div>
                                        </div>

                                        <div class="row mt-2">
                                        <div class="col-md-3">
                                            <input type="checkbox" name="skills" value="angular" aria-label="Seleccionar habilidad Angular" style="margin-right: 0.5rem;">
                                            Angular
                                        </div>
                                        <div class="col-md-3">
                                            <input type="checkbox" name="skills" value="nodejs" aria-label="Seleccionar habilidad Node.js" style="margin-right: 0.5rem;">
                                            Node.js
                                        </div>
                                        <div class="col-md-3">
                                            <input type="checkbox" name="skills" value="python" aria-label="Seleccionar habilidad Python" style="margin-right: 0.5rem;">
                                            Python
                                        </div>
                                        <div class="col-md-3">
                                            <input type="checkbox" name="skills" value="other" aria-label="Seleccionar otras habilidades t√©cnicas" style="margin-right: 0.5rem;">
                                            Otras
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                            
                            <!-- Salario esperado -->
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label id="label-salario" for="form-salario" class="form-label">Salario esperado (EUR/a√±o)</label>
                                    <input type="number"
                                        id="form-salario" 
                                        class="form-control" 
                                        name="expectedSalary"
                                        min="15000" 
                                        max="150000" 
                                        step="1000"
                                        placeholder="45000"
                                        aria-labelledby="label-salario"
                                        aria-describedby="salario-help">
                                    <div id="salario-help" class="field-help">Rango entre ‚Ç¨15,000 y ‚Ç¨150,000</div>
                                </div>
                                
                                <!-- Disponibilidad -->
                                <fieldset class="col-md-6 mb-3">
                                    <legend class="form-label required-field">Disponibilidad para trabajar</legend>
                                    <!-- PROBLEMA: Radio buttons sin fieldset -->
                                    <div class="radio-group">
                                        <div>
                                            <input type="radio" name="availability" value="immediate" aria-label="Disponibilidad inmediata" style="margin-right: 0.5rem;">
                                            Inmediata
                                        </div>
                                        <div>
                                            <input type="radio" name="availability" value="2weeks" aria-label="Disponibilidad en dos semanas" style="margin-right: 0.5rem;">
                                            2 semanas
                                        </div>
                                        <div>
                                            <input type="radio" name="availability" value="1month" aria-label="Disponibilidad en un mes" style="margin-right: 0.5rem;">
                                            1 mes
                                        </div>
                                        <div>
                                            <input type="radio" name="availability" value="negotiable" aria-label="Disponibilidad negociable" style="margin-right: 0.5rem;">
                                            Negociable
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        
                        <!-- Secci√≥n 3: Preferencias y Configuraci√≥n - PROBLEMAS -->
                        <div class="form-section">
                            <div style="font-size: 1.3rem; font-weight: 500; margin-bottom: 1.5rem; color: #007bff;">
                                ‚öôÔ∏è Preferencias y Configuraci√≥n
                            </div>
                            
                            <div class="row">
                                <!-- Idioma preferido -->
                                <div class="col-md-4 mb-3">
                                    <label id="label-idioma" for="form-idioma" class="form-label">Idioma preferido</label>
                                    <select id="form-idioma" aria-labelledby="label-idioma" class="form-select" name="preferredLanguage">
                                        <option value="es" selected>Espa√±ol</option>
                                        <option value="en">English</option>
                                        <option value="fr">Fran√ßais</option>
                                        <option value="de">Deutsch</option>
                                        <option value="pt">Portugu√™s</option>
                                    </select>
                                </div>
                                
                                <!-- Zona horaria -->
                                <div class="col-md-4 mb-3">
                                    <label id="label-zonahoraria" for="form-zonahoraria" class="form-label">Zona horaria</label>
                                    <select class="form-select" name="timezone" id="form-zonahoraria" aria-labelledby="label-zonahoraria">
                                        <option value="">Detectar autom√°ticamente</option>
                                        <option value="Europe/Madrid">Europa/Madrid (CET)</option>
                                        <option value="America/Mexico_City">Am√©rica/Ciudad_de_M√©xico</option>
                                        <option value="America/New_York">Am√©rica/Nueva_York (EST)</option>
                                        <option value="America/Los_Angeles">Am√©rica/Los_√Ångeles (PST)</option>
                                    </select>
                                </div>
                                
                                <!-- Tema preferido -->
                                <fieldset class="col-md-4 mb-3">
                                    <legend class="form-label">Tema de interfaz</legend>
                                    <!-- PROBLEMA: Radio buttons inline sin estructura -->
                                    <div style="margin-top: 0.5rem;">
                                        <input type="radio" name="theme" value="light" checked aria-label="Tema claro" style="margin-right: 0.5rem;">
                                        Claro
                                        <input type="radio" name="theme" value="dark" aria-label="Tema oscuro" style="margin-left: 1rem; margin-right: 0.5rem;">
                                        Oscuro
                                        <input type="radio" name="theme" value="auto" aria-label="Tema autom√°tico" style="margin-left: 1rem; margin-right: 0.5rem;">
                                        Autom√°tico
                                    </div>
                                </fieldset>
                            </div>
                            
                            <!-- Notificaciones - PROBLEMA: Sin fieldset -->
                            <fieldset class="mb-3">
                                <legend class="form-label">Preferencias de notificaciones</legend>
                                <div class="checkbox-group">
                                    <div class="mb-2">
                                        <input type="checkbox" name="notifications" value="email" checked aria-label="Recibir notificaciones por correo electr√≥nico" style="margin-right: 0.5rem;">
                                        Recibir notificaciones por email
                                    </div>
                                    <div class="mb-2">
                                        <input type="checkbox" name="notifications" value="sms" aria-label="Recibir notificaciones por mensaje SMS" style="margin-right: 0.5rem;">
                                        Recibir notificaciones por SMS
                                    </div>
                                    <div class="mb-2">
                                        <input type="checkbox" name="notifications" value="push" checked aria-label="Recibir notificaciones autom√°ticas tipo push" style="margin-right: 0.5rem;">
                                        Recibir notificaciones push
                                    </div>
                                    <div class="mb-2">
                                        <input type="checkbox" name="notifications" value="newsletter" checked aria-label="Suscribirse al bolet√≠n semanal" style="margin-right: 0.5rem;">
                                        Suscribirse al newsletter semanal
                                    </div>
                                </div>
                            </fieldset>
                            
                            <!-- Bio/Descripci√≥n -->
                            <div class="mb-3">
                                <label id="label-bio" for="form-bio" class="form-label">Biograf√≠a o descripci√≥n personal</label>
                                <!-- PROBLEMA: Textarea sin aria-describedby -->
                                <textarea class="form-control" 
                                        id="form-bio"
                                        name="bio"
                                        rows="4"
                                        maxlength="500"
                                        placeholder="Cu√©ntanos un poco sobre ti, tus intereses profesionales y objetivos..."
                                        aria-labelledby="label-bio"
                                        aria-describedby="bio-help"></textarea>
                                <div class="character-counter">0/500 caracteres</div>
                                <div id="bio-help" class="field-help">
                                    Esta informaci√≥n aparecer√° en tu perfil p√∫blico
                                </div>
                            </div>
                        </div>
                        
                        <!-- Secci√≥n 4: Documentos y Archivos - PROBLEMAS CR√çTICOS -->
                        <div class="form-section">
                            <div style="font-size: 1.3rem; font-weight: 500; margin-bottom: 1.5rem; color: #007bff;">
                                üìé Documentos y Archivos
                            </div>
                            
                            <!-- CV/Curr√≠culum -->
                            <div class="mb-4">
                                <div class="form-label">Curr√≠culum Vitae (CV)</div>
                                <!-- PROBLEMA: File input sin accesibilidad -->
                                <div class="file-upload-area" onclick="document.getElementById('cvFile').click()">
                                    <div style="font-size: 2rem; margin-bottom: 1rem;">üìÑ</div>
                                    <div style="font-weight: 500;">Haz clic para subir tu CV</div>
                                    <div class="subtle-text" style="margin-top: 0.5rem;">
                                        Formatos admitidos: PDF, DOC, DOCX (m√°x. 5MB)
                                    </div>
                                    <input type="file" 
                                        id="cvFile"
                                        name="cv"
                                        accept=".pdf,.doc,.docx"
                                        style="display: none;"
                                        aria-describedby="cv-help">
                                </div>
                                <div class="field-help" id="cv-help">
                                    Tu CV nos ayuda a entender mejor tu experiencia profesional
                                </div>
                            </div>
                            
                            <!-- Foto de perfil -->
                            <div class="mb-4">
                                <div class="form-label">Foto de perfil (opcional)</div>
                                <div class="file-upload-area" onclick="document.getElementById('profilePhoto').click()">
                                    <div style="font-size: 2rem; margin-bottom: 1rem;">üì∑</div>
                                    <div style="font-weight: 500;">Subir foto de perfil</div>
                                    <div class="subtle-text" style="margin-top: 0.5rem;">
                                        JPG, PNG (m√°x. 2MB, recomendado: 400x400px)
                                    </div>
                                    <!-- PROBLEMA: File input sin aria-describedby -->
                                    <input type="file" 
                                        id="profilePhoto"
                                        name="profilePhoto"
                                        accept="image/*"
                                        style="display: none;">
                                </div>
                            </div>
                            
                            <!-- Portfolio/Enlaces -->
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label id="label-portfolio" for="form-portfolio" class="form-label">Portfolio web</label>
                                    <input type="url" 
                                        id="form-portfolio"
                                        class="form-control" 
                                        name="portfolio"
                                        placeholder="https://tu-portfolio.com"
                                        aria-describedby="portfolio-help"
                                        aria-labelledby="label-portfolio">
                                    <div class="field-help" id="portfolio-help">
                                        Enlace a tu portfolio o sitio web personal
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label id="label-linkedin" for="form-linkedin" class="form-label">Perfil de LinkedIn</label>
                                    <input type="url" 
                                        id="form-linkedin"
                                        class="form-control" 
                                        name="linkedin"
                                        placeholder="https://linkedin.com/in/tu-perfil"
                                        aria-labelledby="label-linkedin">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label id="label-github" for="form-github" class="form-label">GitHub/GitLab</label>
                                    <input type="url" 
                                        id="form-github"
                                        aria-labelledby="label-github"
                                        class="form-control" 
                                        name="github"
                                        placeholder="https://github.com/tu-usuario">
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label id="label-enlace-relevante" for="form-enlace-relevante" class="form-label">Otro enlace relevante</label>
                                    <input type="url" 
                                        id="form-enlace-relevante"
                                        aria-labelledby="label-enlace-relevante"
                                        class="form-control" 
                                        name="otherLink"
                                        placeholder="https://...">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Secci√≥n 5: T√©rminos y Confirmaci√≥n - PROBLEMAS -->
                        <div class="form-section">
                            <!-- PROBLEMA: Checkboxes legales sin fieldset -->
                            <fieldset class="mb-3">
                                <legend style="font-size: 1.3rem; font-weight: 500; margin-bottom: 1.5rem; color: #007bff;">
                                    ‚úÖ Confirmaci√≥n y T√©rminos
                                </legend>
                                <div class="checkbox-group">
                                    <div class="mb-3">
                                        <!-- Checkbox requerido con aria-label adecuado -->
                                        <input type="checkbox" name="agreeTerms" required aria-label="Aceptar t√©rminos y condiciones" style="margin-right: 0.5rem;">
                                        <span>
                                        Acepto los 
                                        <a href="#" target="_blank" aria-label="Abrir t√©rminos y condiciones en nueva ventana">t√©rminos y condiciones de uso</a> 
                                        del servicio
                                        </span>
                                    </div>

                                    <div class="mb-3">
                                        <input type="checkbox" name="agreePrivacy" required aria-label="Aceptar pol√≠tica de privacidad" style="margin-right: 0.5rem;">
                                        <span>
                                        He le√≠do y acepto la 
                                        <a href="#" target="_blank" aria-label="Abrir pol√≠tica de privacidad en nueva ventana">pol√≠tica de privacidad</a>
                                        </span>
                                    </div>

                                    <div class="mb-3">
                                        <input type="checkbox" name="agreeMarketing" aria-label="Aceptar recibir comunicaciones comerciales" style="margin-right: 0.5rem;">
                                        <span>
                                        Acepto recibir comunicaciones comerciales y marketing 
                                        (opcional)
                                        </span>
                                    </div>

                                    <div class="mb-3">
                                        <input type="checkbox" name="confirmAge" required aria-label="Confirmar mayor√≠a de edad" style="margin-right: 0.5rem;">
                                        <span>
                                        Confirmo que soy mayor de 18 a√±os
                                        </span>
                                    </div>
                                </div>
                            </fieldset>
                            
                            <!-- Verificaci√≥n final -->
                            <div class="mb-4 p-3" style="background: #f8f9fa; border-radius: 8px; border-left: 4px solid #007bff;">
                                <div style="font-weight: 500; margin-bottom: 0.5rem;">
                                    ‚ö†Ô∏è Verificaci√≥n final
                                </div>
                                <div style="font-size: 0.9rem;">
                                    Por favor, revisa todos los datos ingresados antes de enviar el formulario. 
                                    Una vez registrado, algunos campos no podr√°n modificarse.
                                </div>
                            </div>
                            
                            <!-- Botones de acci√≥n - PROBLEMA -->
                            <div style="display: flex; gap: 1rem; justify-content: end;">
                                <button type="button" class="btn btn-outline-secondary">
                                    Limpiar formulario
                                </button>
                                <button type="button" class="btn btn-secondary">
                                    Guardar como borrador
                                </button>
                                <!-- PROBLEMA: Bot√≥n submit sin indicar proceso -->
                                <button type="submit" class="btn btn-primary">
                                    Completar registro
                                </button>
                            </div>
                        </div>
                    </form>
                </main>
            </div>
        </div>
    </div>
    
    <!-- PROBLEMA: Loading overlay sin accesibilidad -->
    <div id="submitOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); display: none; justify-content: center; align-items: center; z-index: 9999;">
        <div style="background: white; padding: 2rem; border-radius: 10px; text-align: center;">
            <div class="spinner-border text-primary mb-3"></div>
            <div>Procesando registro...</div>
            <div style="font-size: 0.8rem; color: #6c757d; margin-top: 0.5rem;">
                Esto puede tomar unos segundos
            </div>
        </div>
    </div>
    
    <!-- PROBLEMA: Mensajes no accesibles -->
    <div id="messageArea" style="position: fixed; top: 20px; right: 20px; z-index: 10000; max-width: 400px;"></div>
    
    <script src="{{ url_for('static', filename='js/portal.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // PROBLEMAS INTENCIONADOS EN EL JAVASCRIPT
        
        let formProgress = 25;
        let isSubmitting = false;
        
        // PROBLEMA: Contador de caracteres sin accesibilidad
        function updateCharacterCounter(input, maxLength) {
            const counter = input.parentNode.querySelector('.character-counter');
            if (counter) {
                const currentLength = input.value.length;
                counter.textContent = `${currentLength}/${maxLength} caracteres`;
                
                // PROBLEMA: No anuncia cuando se acerca al l√≠mite
                if (currentLength >= maxLength * 0.9) {
                    counter.style.color = '#dc3545';
                } else {
                    counter.style.color = '#6c757d';
                }
            }
        }
        
        // PROBLEMA: Validaci√≥n de email sin feedback accesible
        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        // PROBLEMA: Validaci√≥n en tiempo real problem√°tica
        function showFieldValidation(fieldName, isValid, message) {
            const field = document.querySelector(`[name="${fieldName}"]`);
            const validationDiv = field.parentNode.querySelector('.validation-message');
            
            if (validationDiv) {
                validationDiv.style.display = 'block';
                validationDiv.className = `validation-message ${isValid ? 'success' : 'error'}`;
                validationDiv.textContent = message;
                
                // PROBLEMA: No usa aria-invalid
                // PROBLEMA: No asocia el mensaje con el campo
            }
        }
        
        // PROBLEMA: Actualizar progreso sin accesibilidad
        function updateProgress(percentage) {
            const progressBar = document.querySelector('.progress-fill');
            progressBar.style.width = percentage + '%';
            
            // PROBLEMA: No anuncia el cambio de progreso
        }
        
        // PROBLEMA: Manejo de archivos sin accesibilidad
        function handleFileUpload(input, maxSize) {
            const file = input.files[0];
            if (!file) return;
            
            const uploadArea = input.parentNode;
            
            if (file.size > maxSize) {
                // PROBLEMA: Error no accesible
                alert('El archivo es muy grande');
                input.value = '';
                return;
            }
            
            // PROBLEMA: Cambio visual sin anuncio
            uploadArea.style.background = '#d4edda';
            uploadArea.querySelector('div').innerHTML = `‚úÖ ${file.name}`;
        }
        
        // PROBLEMA: Mostrar mensajes no accesibles
        function showMessage(message, type = 'success') {
            const messageArea = document.getElementById('messageArea');
            const messageDiv = document.createElement('div');
            
            messageDiv.className = `alert alert-${type} alert-dismissible`;
            messageDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" onclick="this.parentElement.remove()"></button>
            `;
            
            messageArea.appendChild(messageDiv);
            
            // PROBLEMA: No se anuncia a lectores de pantalla
            
            setTimeout(() => {
                messageDiv.remove();
            }, 5000);
        }
        
        // Configuraci√≥n del formulario - M√öLTIPLES PROBLEMAS
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('registrationForm');
            
            // PROBLEMA: Listeners sin manejo de accesibilidad
            
            // Contadores de caracteres
            document.querySelectorAll('input[maxlength], textarea[maxlength]').forEach(input => {
                const maxLength = input.getAttribute('maxlength');
                updateCharacterCounter(input, maxLength);
                
                input.addEventListener('input', () => {
                    updateCharacterCounter(input, maxLength);
                });
            });
            
            // Validaci√≥n de email en tiempo real - PROBLEM√ÅTICA
            const emailField = document.querySelector('[name="email"]');
            emailField.addEventListener('blur', function() {
                const isValid = validateEmail(this.value);
                if (this.value) {
                    showFieldValidation('email', isValid, 
                        isValid ? 'Email v√°lido' : 'Formato de email incorrecto');
                }
            });
            
            // Range slider - PROBLEMA: Sin descripci√≥n accesible
            const experienceRange = document.querySelector('[name="experience"]');
            const experienceValue = document.getElementById('experienceValue');
            
            experienceRange.addEventListener('input', function() {
                experienceValue.textContent = `${this.value} a√±os`;
                // PROBLEMA: No anuncia el cambio de valor
            });
            
            // File inputs - PROBLEMAS DE ACCESIBILIDAD
            document.getElementById('cvFile').addEventListener('change', function() {
                handleFileUpload(this, 5 * 1024 * 1024); // 5MB
            });
            
            document.getElementById('profilePhoto').addEventListener('change', function() {
                handleFileUpload(this, 2 * 1024 * 1024); // 2MB
            });
            
            // Env√≠o del formulario - M√öLTIPLES PROBLEMAS
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (isSubmitting) return;
                
                // PROBLEMA: Validaci√≥n b√°sica sin accesibilidad
                const requiredFields = form.querySelectorAll('[required], .required-field ~ input, .required-field ~ select');
                let hasErrors = false;
                
                requiredFields.forEach(field => {
                    if (!field.value.trim()) {
                        // PROBLEMA: Error no accesible
                        field.style.borderColor = '#dc3545';
                        hasErrors = true;
                    } else {
                        field.style.borderColor = '';
                    }
                });
                
                if (hasErrors) {
                    // PROBLEMA: No enfoca el primer error
                    showMessage('Por favor completa todos los campos requeridos', 'danger');
                    return;
                }
                
                // PROBLEMA: Loading sin accesibilidad
                isSubmitting = true;
                document.getElementById('submitOverlay').style.display = 'flex';
                
                // Simular env√≠o
                setTimeout(() => {
                    document.getElementById('submitOverlay').style.display = 'none';
                    isSubmitting = false;
                    
                    if (Math.random() > 0.2) {
                        showMessage('¬°Registro completado exitosamente! Te hemos enviado un email de confirmaci√≥n.', 'success');
                        setTimeout(() => {
                            window.location.href = '/';
                        }, 3000);
                    } else {
                        showMessage('Error al procesar el registro. Int√©ntalo de nuevo.', 'danger');
                    }
                }, 3000);
            });
            
            // PROBLEMA: Botones sin manejo de teclado apropiado
            document.querySelector('.btn-outline-secondary').addEventListener('click', function() {
                if (confirm('¬øEst√°s seguro de que quieres limpiar el formulario?')) {
                    form.reset();
                    // PROBLEMA: No anuncia que se limpi√≥
                }
            });
        });
    </script>
    
</body>
</html>

<!--
PROBLEMAS CR√çTICOS DE ACCESIBILIDAD PARA CORREGIR:

ESTRUCTURA DE FORMULARIO:
1. ‚úó Falta fieldset/legend para agrupar secciones relacionadas
2. ‚úó Labels no asociados correctamente (sin for/id)
3. ‚úó Campos requeridos sin aria-required
4. ‚úó Mensajes de ayuda sin aria-describedby
5. ‚úó Validaciones sin aria-invalid

GRUPOS DE CAMPOS:
6. ‚úó Radio buttons sin fieldset/legend
7. ‚úó Checkboxes sin fieldset para agrupar opciones relacionadas
8. ‚úó Grupo de habilidades sin estructura sem√°ntica

ELEMENTOS COMPLEJOS:
9. ‚úó Range input sin aria-valuetext descriptivo
10. ‚úó File inputs sin accesibilidad (ocultos con divs clickeables)
11. ‚úó Datalist sin aria-describedby
12. ‚úó Select options por defecto problem√°ticas

FEEDBACK Y VALIDACI√ìN:
13. ‚úó Mensajes de error no asociados con campos
14. ‚úó Validaci√≥n en tiempo real sin aria-live
15. ‚úó Contadores de caracteres no anunciados
16. ‚úó Estados de validaci√≥n sin aria-invalid
17. ‚úó Progreso del formulario no accesible

CONTENIDO DIN√ÅMICO:
18. ‚úó Subida de archivos sin feedback accesible
19. ‚úó Cambios de estado no anunciados
20. ‚úó Loading overlay sin manejo de foco
21. ‚úó Mensajes de √©xito/error no anunciados

NAVEGACI√ìN Y INTERACCI√ìN:
22. ‚úó Campos obligatorios no claramente identificados
23. ‚úó Enlaces externos sin indicaci√≥n
24. ‚úó Botones de acci√≥n sin descripci√≥n de proceso
25. ‚úó Falta navegaci√≥n con teclado entre secciones

INFORMACI√ìN CONTEXTUAL:
26. ‚úó Ayudas contextuales no asociadas
27. ‚úó Restricciones de formato sin describir
28. ‚úó L√≠mites de archivos no accesibles
29. ‚úó T√©rminos legales sin estructura apropiada

PROBLEMAS T√âCNICOS:
30. ‚úó Contraste insuficiente en textos secundarios
31. ‚úó Focus no visible en elementos custom
32. ‚úó Skip links ausentes para navegaci√≥n
33. ‚úó Roles ARIA faltantes para elementos complejos

El equipo debe implementar:
- fieldset/legend para agrupar campos relacionados
- Asociaciones correctas label/input (for/id)
- aria-required para campos obligatorios
- aria-describedby para mensajes de ayuda y error
- aria-invalid para estados de validaci√≥n
- aria-live regions para feedback din√°mico
- aria-valuetext para ranges
- Alternativas accesibles para file uploads
- Manejo apropiado de foco
- Anuncios de cambios de estado
- Navegaci√≥n con teclado mejorada
- Indicadores claros de campos requeridos
-->